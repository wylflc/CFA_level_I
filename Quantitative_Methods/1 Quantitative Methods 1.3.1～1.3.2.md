# 1 Quantitative Methods
## 1.3 Statistical Measures of Asset Returns 资产收益的统计度量方法

*这一章我们将真正迎来一些较为复杂的数学计算，和更为高深的数学概念在金融中的实际应用*

**学习要点**

- 计算、解释和评估**集中趋势**和**位置度量**，以解决投资问题  
- 计算、解释和评估**离散度量**，以解决投资问题  
- 解释和评估**偏度**与**峰度度量**，以解决投资问题  
- 解释两个变量之间的**相关性**，以解决投资问题  

### 1.3.1 Measures of Central Tendency and Location 集中趋势和位置度量

#### 要点

- 计算、解释和评估集中趋势和位置度量，以解决投资问题

#### Measures of Central Tendency 集中趋势度量

- **算数平均值**
  算术平均数是将数据集中所有观察值的总和除以观察值的个数。

- **样本均值**
  样本均值是从样本数据中计算得出的平均值。

**算术平均数**的一个特点和潜在缺点是它对**极端值**或**异常值**的敏感性。由于所有观测值都被用于计算平均数，并且赋予了**相等的权重**（即重要性），因此**算术平均数**会受到极大或极小的观测值的显著影响，分别会使其向上或向下拉动。在这种情况下，最常见的方法是报告**中位数**，或者将中位数作为替代，或与平均数一起报告。

- **中位数**
  中位数是数据集中排序后的**中间项的值**，排序可以是升序或降序。在一个奇数个样本的$n$个观测值中，中位数是占据$(n + 1)/2$位置的观测值。在一个偶数个样本中，我们将中位数定义为占据$n/2$和$(n + 2)/2$位置的观测值的平均数（即两个中间观测值的平均值）。 
  无论我们使用偶数个样本还是奇数个样本的计算方法，都会有**相等数量的观测值**位于中位数的上方和下方。一个分布只有一个中位数。中位数的一个潜在优势是，与算术平均数不同，**异常值不会影响中位数**。
  然而，中位数并没有使用所有关于观测值大小的信息，它仅关注排好序的观测值的相对位置。计算中位数也可能更复杂。数学家们通过说中位数在数学上比平均数更难处理来表达这一缺点。

- **众数**(The Mode)
  众数是数据集中出现**频率最高**的值。一个数据集**可以有多个众数，甚至没有众数**。当一个数据集有一个最频繁出现的值时，我们称其分布为**单峰分布**（unimodal）。如果数据集有两个最频繁出现的值，则称其为**双峰分布**（bimodal）。当数据集中所有值都不同时，分布没有众数，因为没有任何一个值比其他值出现得更频繁。

#### Dealing with Outliers 处理异常值

面对异常值，通常有三种处理方法：
1. 不做任何处理
2. 删掉异常值。例如之前学习的trimmed mean。
3. 将异常值替换为其他值。例如之前学习的winsorized mean。

#### Measures of Location 位置度量

在讨论了集中趋势度量之后，我们现在来探讨一种**描述数据位置**的方法，这种方法通过识别数据中**指定比例以下的值**来进行。例如，确定一个投资组合年回报的25%、50%和75%的值，能够简洁地反映投资组合回报的分布情况。统计学家使用“分位数”这一术语来表示一个值，该值在数据中对应着一个指定比例以下的情况。在以下部分，我们将描述最常用的分位数——**四分位数**、**五分位数**、**十分位数**和**百分位数**，并探讨它们在投资中的应用。

具体位置计算应当遵循以下公式：
$$
L = \frac{n+1}{y}
$$
如果是四分位数，则$y=4$。例如13个数的中位数是第$(13+1)/2=7$个数。

##### Quartiles, Quintiles, Deciles, and Percentiles 四分位数、五分位数、十分位数和百分位数

我们知道，**中位数**将数据分布一分为二。我们还可以定义**其他分割线**，将数据分布划分为更小的部分。**四分位数**将数据分为四个部分，**五分位数**将数据分为五个部分，**十分位数**将数据分为十个部分，**百分位数**将数据分为一百个部分。四分位距（IQR）是第三四分位数与第一四分位数之间的差值，公式为：$IQR = Q3 − Q1$。

一种可视化数据在四分位数之间分布的方法是使用图表，例如**箱线图**。

![[Pasted image 20250321140747.png]]

一般情况下，**四分位距（IQR）** 是箱子的高度，而箱线图的"围栏"（fences）通常设定在**极端值**的位置。另一种常见的箱线图如上图所示，形式通常将围栏设置为四分位距的1.5倍。因此，上围栏是将四分位距的1.5倍加到Q3的上边界，而下围栏是将四分位距的1.5倍从Q2的下边界中减去。超出围栏的数据点（即离群值）也可以显示在图表上。

##### Quantiles in Investment Practice 投资实践中的分位数

# 分位数在投资实践中的应用

分位数在投资组合绩效评估、投资策略开发和研究中具有广泛应用。

投资分析师使用分位数来对**资产、指数和投资组合**的表现进行排名。例如，投资经理的表现通常通过**其相对于同行投资经理的表现所处的百分位**来进行描述。例如，广泛使用的Morningstar投资基金星级排名将星级数量与相对于相似风格投资基金的绩效指标的百分位数关联。

分位数的另一个关键应用是在**投资研究**中。根据**特定的、可以客观量化的特征**（如销售额、市值或资产规模）将数据划分为分位数，使分析师能够评估该特征对某一感兴趣量（如资产回报、销售额、增长或估值指标）的影响。例如，量化驱动的投资者通常根据**公司的股市价值或市值**对公司进行排名，然后将其划分为**十分位数**。第一十分位数包含市值最小的公司投资组合，通常称为小市值公司。第十十分位数包含市值最大的公司，通常称为大市值公司。通过十分位数排名，分析师可以比较小市值公司与大市值公司在绝对和相对上的表现。

### 1.3.2 Measures of Dispersion 离散度度量

#### 学习要点

- 计算、解释和评估离散度度量以解决投资问题

很少有人会否认预期回报或平均回报在投资中的重要性：然而，要更全面地理解一项投资，我们还需要了解**回报是如何围绕均值分布**的。**离散度是围绕中心趋势的变动性**。如果平均回报关注的是回报，那么离散度则关注的是风险和不确定性。

在本课中，我们将探讨最常见的离散度度量：**极差、平均绝对偏差、方差和标准差**。这些都是**绝对离散度**的度量。**绝对离散度**是指在没有与任何参考点或基准进行比较的情况下，存在的变动量。

#### The Range 极差

Range = Maximum value − Minimum value.
极差 $=$ 最大值 $-$ 最小值

优点：计算简单
缺点：
- 极差仅使用了分布中的两个数据点，它无法告诉我们数据的分布情况；
- 对极大或极小的观测值（“离群值”）非常敏感， 这些离群值可能并不代表数据分布的真实情况。

#### Mean Absolute Deviations 平均绝对偏差

**平均绝对偏差**（MAD）是数据集中**每个观测值与均值之间的绝对差的平均值**。它是度量数据分散程度的常见方法之一，能够反映数据集中的平均偏差。
$$
MAD = \frac{1}{n} \sum_{i=1}^{n} |x_i - \bar{x}|
$$
其中，$x_i$ 为数据集中的第 $i$ 个观测值，$\bar{x}$ 为数据的均值，$n$ 为观测值的总数。

MAD比极差更全面一点，但**缺点**是在数学上较难处理。由于平均绝对偏差涉及到**绝对值运算**，它在进一步的统计分析中（如回归分析或推断统计）并不如**方差**那样容易操作。

#### Sample Variance 样本方差

样本方差是衡量数据点与样本均值之间差异的一种方法。它是所有数据点与样本均值之差的平方的平均值。计算公式如下：

$$
s^2 = \frac{1}{n-1} \sum_{i=1}^{n} (X_i - \bar{X})^2
$$

其中：
- $s^2$ 表示样本方差，
- $X_i$ 是第 $i$ 个观测值，
- $\bar{X}$ 是样本均值，
- $n$ 是样本的数量。

样本方差的优点是它可以进一步进行数学操作，如推导标准差。与MAD相比，样本方差在统计分析中更为常见且易于处理。然而，样本方差对极端值（“离群值”）特别敏感，因为它涉及平方差异，所以大偏差会对最终结果产生较大的影响。

**特别注意，样本方差应当使用$n-1$进行计算**

#### Sample Standard Deviation 样本标准差

样本标准差是样本方差的平方根，是数据集分散程度的另一种衡量标准。与样本方差相比，标准差的单位与原始数据的单位相同，这使得它在解释时更为直观。样本标准差的计算公式为：

$$
s = \sqrt{\frac{1}{n-1} \sum_{i=1}^{n} (X_i - \bar{X})^2}
$$

其中：
- $s$ 表示样本标准差，
- $X_i$ 是第 $i$ 个观测值，
- $\bar{X}$ 是样本均值，
- $n$ 是样本的数量。

标准差的优点是它提供了关于数据分散的直观解释，能够衡量数据点相对于均值的典型偏差程度。像样本方差一样，标准差对离群值非常敏感，因此在数据中存在极端值时，它可能会过高。

资产的收益**方差**或**标准差**通常被解释为**资产风险**的衡量指标。收益的方差和标准差考虑了均值以上和以下的收益，分别代表了**上行风险**和**下行风险**。然而，投资者通常只关心**下行风险**——例如，低于均值或低于某一指定最小目标收益的收益。因此，分析师们发展了下行风险的衡量指标。

#### Downside Deviation 下行偏差

下行偏差是衡量投资组合或资产下行风险的一种方法。与标准差不同，它只考虑那些低于某一特定基准或期望收益的负收益部分，而不包括上行收益。换句话说，下行偏差仅考虑负的波动性，因此它提供了对风险的一个更专注的衡量，特别是针对那些低于投资者期望的回报。

简单来说，就是在标准差的计算公式中，$X_i$仅考虑低于目标值的样本，$\bar{X}$使用目标值即可。

下行偏差的优点是它专注于损失风险，而不是整体波动性，因此能更好地反映投资者的风险关注点。

#### Coefficient of Variation 变异系数

一般情况下，不同数据集直接比较方差是不太合适的，因为方差是数据偏离均值的程度，而不同数据的均值一般不同，甚至不具备可比性，所以需要引入一种更合理的量来进行比较。

**变异系数**（CV）是衡量风险与回报关系的一个重要指标。它表示的是标准差与均值之间的比率，能够帮助投资者比较不同资产或投资组合的相对风险。变异系数越高，表示单位收益的波动性越大，投资的风险也越高。

计算变异系数的公式如下：

$$
\text{变异系数} = \frac{\text{标准差}}{\text{均值}}
$$

其中：
- **标准差** 是资产回报的波动性度量。
- **均值** 是资产回报的期望值。

变异系数的单位是**无量纲**的，因此它可以用于**比较不同资产之间的风险**，无论这些资产的规模或单位是什么。例如，在比较两个不同市场的股票时，变异系数可以帮助我们理解哪个市场在风险控制下提供了更好的回报。


