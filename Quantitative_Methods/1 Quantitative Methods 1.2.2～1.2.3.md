# 1 Quantitative Methods
## 1.2 Time Value of Money in Finance 时间价值(TVM)在金融中的应用
### 1.2.2 Implied Return and Growth 隐含回报与增长

#### 学习要点

- 计算并解释固定收益工具的隐含回报率，以及根据现值（PV）和现金流计算股权工具的必要回报率和隐含增长率。

上一节学习了未来的现金流在当下的价值，但是实际上很多情况下，通常未来回报是并不明确的，因此常常需要根据现在的价格来推算其隐含的未来投资回报。亦或者其未来回报明确，但是其回报率可能会随着其价格实时波动，因此我们需要计算其回报率，以确定其当前价格是否具有投资价值。

#### Implied Return for Fixed-Income Instruments 固定收益工具的隐含回报率

固定收益工具的特点是具有合同规定的利息和本金现金流。如果我们观察到现值（或价格），并假设所有未来现金流按承诺发生，那么折现率（$r$）或到期收益率（YTM）就是在这些假设下衡量隐含回报率的一种方式，适用于这种现金流模式。

对于折价债券或工具，回顾一下，投资者在到期时收到单一的本金现金流（FV），其中（FV − PV）代表隐含回报率。如果这是持续$t$年的一笔投资，则我们可以计算出年化收益率为：
$$
r = \left(\frac{FV}{PV}\right)^{\frac{1}{t}}-1
$$

##### 例题

回顾例子2，2020年发行的七年期希腊政府债券（每年付当年利息，最后一年付利息并归还本金），年利率为2.00%，两年后每EUR100本金的价格为EUR93.091。
- 假设投资者能够以原始到期收益率（YTM）2.00%再投资定期利息，那么隐含的两年回报率是多少？

##### 答案

投资者初始投入资金为100元，第一年收到2欧元利息并再投资，第二年收到2欧元加上当前的价格93.091欧元，则$FV=2\times (1+0.02)+2+93.091=97.13$。
因此两年的隐含回报率为
$$
\left(\frac{97.13}{100}\right)^{\frac{1}{2}}-1 = -1.445\%
$$

#### Equity Instruments, Implied Return, and Implied Growth 股权工具、隐含回报率和隐含增长率

终于到了最喜闻乐见的给股权计算回报率的部分啦～

在这里我们以最简单的**恒定股息增长率**为例进行说明，回顾一下**恒定股息增长率**情况下股权现值的计算公式：
$$
\begin{align*}
PV &= \sum_{i=1}^{\infty}\frac{D(1+g)^i}{(1+r)^i}\\
&= \frac{D(1+g)}{r-g}
\end{align*}
$$
实际中，我们往往是知道当前的股价的，那么我们的隐含回报率$r$可由下式计算：
$$
\begin{align*}
r = \frac{D(1+g)}{PV}+g
\end{align*}
$$
同样的，如果我们对一个公司的增长率感兴趣，也可以由下式进行计算：
$$
\begin{align*}
g = \frac{r\times PV-D}{PV+D}
\end{align*}
$$

**与直接用货币金额比较股票价格不同，常见的做法是比较股票价格与每股收益的比率，即市盈率（P/E比率）。**

*终于迎来了我们第一个常见的金融指标----PE*

- **市盈率**是一个**相对估值指标**，通过控制已知的**价值驱动因素**（每股收益）以及**货币因素**，提高了可比性。它类似于以每平方米价格来表示房地产价格。
- 一只股票的市盈率为20意味着其股价是每股收益的20倍，投资者愿意支付每股收益的20倍来购买每一股交易的股票，这比市盈率为10的股票更昂贵。

基于之前的现价计算公式，我们可以得到以下关系：
$$
\begin{align*}
PE = \frac{PV}{E}= \frac{\frac{D}{E}(1+g)}{r-g}
\end{align*}
$$
其中$\frac{D}{E}$是股息比上每股收益，也就是我们常说的**股息支付率**。

如果我们用$D_t$表示当前的分红，$D_{t+1}$表示下一年的分红，则**远期市盈率( forward price-to-earnings ratio)** 可以表示为：
$$
\begin{align*}
\frac{PV_t}{E_{t+1}}= \frac{\frac{D_{t+1}}{E_{t+1}}}{r-g}
\end{align*}
$$

##### 例题

假设可口可乐股票的远期市盈率为28，预期股息支付比率为70%。分析师认为可口可乐股票应获得9%的回报率，并且其股息将无限期地以4.50%的年增长率增长。对于有意投资可口可乐股票的投资者，建议采取什么行动？

##### 答案

根据上面的公式可计算得到当前可口可乐合理的市盈率应为：
$$
\frac{0.70}{0.09-0.045} = 15.56
$$
小于当前的市盈率，说明当前的股价处于高估状态（因为P/E中的E是年报上公布的结果，不会实时变化，只能是分子的P太大了导致市盈率太大）。

### 1.2.3 Cash Flow Additivity 现金流可加性

#### 学习要点

- 解释现金流加法原理、它在无套利条件中的重要性，以及它在计算隐含远期利率、远期汇率和期权价值中的应用。

今天与未来现金流之间的时间价值权衡，除了用于定价未来现金流或使用现金流加法原理计算单一工具的隐含回报外，还可以进一步扩展。在**现金流加法原理**下，任何未来现金流的现值（在同一点索引）等于现金流现值的总和。该原理在确保市场价格反映无套利条件中至关重要，意味着在没有交易成本的情况下，不可能通过无风险的方式获利。

#### Implied Forward Rates Using Cash Flow Additivity 使用现金流加法计算隐含远期利率

假设我们有两种债券：

1. **一年期债券**：面值为1000元，年利率为5%。
2. **两年期债券**：面值为1000元，年利率为6%。

通过这两个债券的价格和现金流，我们可以计算隐含远期利率。

1. 步骤 1：计算一年期债券的现值
   一年期债券的年利率为5%，所以它的现值（价格）可以通过以下公式计算：
   $$
   P_1 = \frac{1000}{(1 + 5\%)}=952.38
   $$

2. 步骤 2：计算两年期债券的现值
   两年期债券的年利率为6%，所以它的现值（价格）为：
   $$
   P_2 = \frac{1000}{(1 + 6\%)^2}=891.25
   $$

3. 步骤 3：推算隐含远期利率
   我们现在知道，投资者如果购买两年期债券，可以获得比购买一年期债券更多的利息回报。为了推算第二年的隐含远期利率，我们可以通过以下公式计算：
   $$
   F_{1,1} = \frac{(1 + 6\%)^2}{(1 + 5\%)}-1=6.9\%
   $$

   这意味着，从第二年开始的隐含远期利率为6.9%。

#### Forward Exchange Rates Using No Arbitrage 使用无套利条件计算远期汇率

我们现在将**现金流加法原理**扩展到涉及不同货币的经济情景。

假设你有1,000美元可以投资六个月。你正在考虑在美国或日本的六个月政府债券中进行无风险投资。假设当前日元（JPY）与美元（USD）的汇率为134.40（即，JPY134.40 = USD1）。假设六个月的日元无风险利率为0.05%，而六个月的美元无风险利率为2.00%。本例假设采用**连续复利**。

1. 投资策略1：投资1,000美元于六个月美国国库券
   - 在时间 t = 0：以2.00%的美元无风险利率投资1,000美元，期限为六个月。
   - 在时间 t = T（六个月后）：收到1,010.05美元（= $1,000\times e^{0.02 × 0.5}$）。

1. 投资策略2：将1,000美元转换为日元，按当前汇率134.40进行六个月的日元国库券投资，并在六个月后按照今天设定的六个月远期汇率133.096将已知金额转换回美元。
   - 在时间 t = 0：将1,000美元转换为JPY134,400。以0.05%的日元无风险利率借出134,400日元，期限为六个月。
   - 在时间 t = T（六个月后）：收到134,433.60日元（$= 134,400\times e^{0.0005 × 0.5}$）的贷款收益。以133.096的远期汇率将日元贷款收益兑换回美元，收到1,010.05美元（= $134,433.60 / 133.096$）。

这两种策略在经济上是**等价**的，因为它们都涉及在 $t = 0$ 投资1,000美元，并在六个月后收到1,010.05美元。这两种策略之间的联系元素是六个月的远期汇率133.096 JPY/USD。**如果该远期汇率设定为高于或低于133.096，则在日元和美元之间转换时将存在套利机会。**

#### Option Pricing Using Cash Flow Additivity 使用现金流加法原理进行期权定价

*合约定价，又是一个相当有用的内容～*

假设某资产当前价格为40元。该资产的价格是有风险的，可能在下一时间周期内上涨40%，达到56元，也可能下跌20%，达到32元。

一个投资者希望出售该资产的合约，合约的买方拥有权利但没有义务以50元的价格在下一时间周期结束时购买该资产。我们可以使用现金流加法原理来确定该合约的无套利定价。

对于合约买方而言，其面临两种选择：
-  价格上涨：40%的价格上涨导致合约价值为6元（$=56 − 50$），因为合约持有者将选择以50元的价格购买资产，并能够以市场价格56元出售该资产。
-  价格下跌：20%的价格下跌导致合约价值为0元，因为合约持有者在市场价格仅为32元时将选择不以50元的价格购买资产。

##### 合约卖方的头寸

在$t=0$时，合约的价值为$c_0$。

在$t=1$时，合约的价值为：
- CNY6（如果标的资产上涨至CNY56）
- CNY0（如果标的资产下跌至CNY32）

初始合约价值$c_0$是未知的，可以通过使用**现金流加法原理**和**无套利定价**来确定。也就是说，可以使用每个未来情景下合约和标的资产的价值来构建一个无风险投资组合，或者一个在两种情景下价值相同的投资组合。例如，假设在$t=0$时，投资者创建了一个组合，在该组合中，合约以价格$c_0$卖出，同时购买0.25单位的标的资产。这个组合被称为复制组合，因为它专门设计用来创建与无风险资产的未来现金流相匹配的现金流。

令组合的价值在$t=0$和$t=1$时分别表示为$V_0$和在价格上涨和价格下跌的情景下的$V_1$，我们有以下关系：
$$
V_0=0.25\times40-c_0
$$
$$
V_1^u=0.25\times56-6=8
$$
$$
V_1^d=0.25\times32-0=8
$$
如上所示，无论资产价格是上涨还是下跌，复制组合的价值始终为CNY8。因此，该组合是无风险的，可以被折现为无风险资产。

*注意上面的$0.25\times40-c_0$中的减号，其原因是这个合约本质上是一个看涨的call合约，对于一个无风险组合，在买入股票的同时，需要卖出看涨合约，才能做到无风险。而卖出则意味着在初始时刻，投资者在花费 $0.25\times40$ 买入股票时，通过卖出合约收到了$c_0$，因此二者是相反方向的现金流，所以一正一负。类似的，如果是计算put合约的定价，则需要变成$0.25\times 40+p_0$的形式进行处理。*

##### 求解$c_0$

为了求解$c_0$，我们将复制组合的现值$(0.25 \times 40 - c_0)$与在每个结果下无风险支付CNY8的折现未来价值相等，如公式5所示。假设利率$r$为5%：
$$
V_0 = 0.25\times 40 - c_0,
$$
$$
V_0 = \frac{V_1^u}{1+r} = \frac{V_1^d}{1+r}
$$
因此，
$$
0.25 \times 40 - c_0 = \frac{\text{CNY8}}{1.05}
$$
解得$c_0$为CNY2.38。因此，CNY2.38是合约卖方从合约买方收到的公平价格。

##### 对冲比率

在上面的例子中，我们假设投资者购买了0.25单位的标的资产作为组合的一部分。标的资产的这个比例称为期权定价中的对冲比率（hedge ratio）。实际上，刚才完成的例子是求解看涨期权价值的简化过程（这部分内容将在课程中更详细地介绍）。与我们之前的例子一样，我们使用现金流加法原理比较不同的策略，帮助求解金融工具的无套利价格。





